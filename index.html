<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="BRAINSTools : A suite of tools for medical image processing focused on brain analysis" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>BRAINSTools</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/BRAINSia/BRAINSTools">View on GitHub</a>

          <h1 id="project_title">BRAINSTools</h1>
          <h2 id="project_tagline">A suite of tools for medical image processing focused on brain analysis</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/BRAINSia/BRAINSTools/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/BRAINSia/BRAINSTools/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <p>The BRAINSTools project is a harness to assist in building the many BRAINSTools under development.</p>

<h2>
<a name="building" class="anchor" href="#building"><span class="octicon octicon-link"></span></a>Building</h2>

<p>Example session for a clean build on Linux using gcc-4.2:</p>

<div class="highlight highlight-bash"><pre><span class="nv">DIRECTORY</span><span class="o">=</span>~/src/mytester
mkdir <span class="k">${</span><span class="nv">DIRECTORY</span><span class="k">}</span>
<span class="nb">cd</span> <span class="k">${</span><span class="nv">DIRECTORY</span><span class="k">}</span>
git clone git://github.com/BRAINSia/BRAINSTools.git
</pre></div>

<p><strong>For developers:</strong></p>

<div class="highlight highlight-bash"><pre><span class="nb">cd</span> <span class="k">${</span><span class="nv">DIRECTORY</span><span class="k">}</span>/BRAINSTools/
bash ./Utilities/SetupForDevelopment.sh
</pre></div>

<p>Finally:</p>

<div class="highlight highlight-bash"><pre>mkdir -p <span class="k">${</span><span class="nv">DIRECTORY</span><span class="k">}</span>/BRAINSTools-build
<span class="nb">cd</span> <span class="k">${</span><span class="nv">DIRECTORY</span><span class="k">}</span>/BRAINSTools-build/
<span class="nv">CC</span><span class="o">=</span>/usr/bin/gcc-4.2 <span class="se">\</span>
<span class="nv">CXX</span><span class="o">=</span>/usr/bin/g++-4.2 <span class="se">\</span>
ccmake ../BRAINSTools <span class="se">\</span>
-DUSE_BRAINSFit:BOOL<span class="o">=</span>ON <span class="se">\</span>
-DUSE_BRAINSConstellationDetector:BOOL<span class="o">=</span>ON <span class="se">\</span>
-DUSE_BRAINSABC:BOOL<span class="o">=</span>ON
make -j24 -k
<span class="c">## NOTE:  The fetching of data still has problems </span>
<span class="c">## with parallel builds, so you may need to restart it a few times...</span>
make
make
make
</pre></div>

<h1>
<a name="development" class="anchor" href="#development"><span class="octicon octicon-link"></span></a>Development</h1>

<p>Developers should run the "./Utilities/SetupForDevelopment.sh" script to get started.</p>

<h2>
<a name="testing" class="anchor" href="#testing"><span class="octicon octicon-link"></span></a>Testing</h2>

<p><code>BRAINSTools_MAX_TEST_LEVEL</code> adjusts how agressive the test suite is so that long running tests or incomplete tests can easily be silenced</p>

<div class="highlight highlight-cmake"><pre><span class="nb">set</span><span class="p">(</span><span class="s">BRAINSTools_MAX_TEST_LEVEL</span> <span class="s">3</span> 
      <span class="s">CACHE</span> <span class="s">STRING</span> <span class="s2">"Testing level for managing test burden"</span><span class="p">)</span>
</pre></div>

<p><strong>1</strong> - Run the absolute minimum (very fast tests) </p>

<ul>
<li>These should always pass before any code commit!</li>
</ul><p><strong>3</strong> - Run fast tests on continous builds.</p>

<ul>
<li>These need immediate attention if they begin to fail!</li>
</ul><p><strong>5</strong> - Run moderate nightly tests.</p>

<ul>
<li>These need immediate attention if they begin to fail!</li>
</ul><p><strong>7</strong> - Run long running extensive test that are a burden to normal development.</p>

<ul>
<li>Testing done 1x per week.</li>
</ul><p><strong>8</strong> - Run tests that fail due to incomplete test building. </p>

<ul>
<li>These are good ideas for test that we don't have time to make robust.</li>
</ul><p><strong>9</strong> - Run tests that don't have much utility currently.</p>

<hr><h6>
<a name="example" class="anchor" href="#example"><span class="octicon octicon-link"></span></a>Example</h6>

<p>setting a test's max level in TestSuite/CMakeLists.txt</p>

<div class="highlight highlight-cmake"><pre><span class="nb">if</span><span class="p">(</span> <span class="o">${</span><span class="nv">BRAINSTools_MAX_TEST_LEVEL</span><span class="o">}</span> <span class="s">GREATER</span> <span class="s">8</span><span class="p">)</span>
  <span class="nb">ExternalData_add_test</span><span class="p">(</span><span class="s">FindCenterOfBrainFetchData</span>
    <span class="s">NAME</span> <span class="s">itkResampleInPlaceImageFilterTest</span>
    <span class="s">COMMAND</span> <span class="err">$</span><span class="s">&lt;TARGET_FILE:itkResampleInPlaceImageFilterTest&gt;</span>
      <span class="s">itkResampleInPlaceImageFilterTest</span> <span class="s">input1</span> <span class="s">transform1</span> <span class="s">checkresult</span>
  <span class="p">)</span>
</pre></div>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">BRAINSTools maintained by <a href="https://github.com/BRAINSia">BRAINSia</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
